# frozen_string_literal: true

# <%= full_model_name %>Serializer
# 
# Handles JSON serialization for <%= model_name.humanize.pluralize.downcase %> API responses.
# Transforms database records into frontend-friendly JSON format.
# 
# Includes all generated attributes plus common fields like timestamps.
# Uses slug as the public ID for better security and SEO.
# 
<% if module_name -%>
module <%= module_name %>
  class <%= model_name.camelize %>Serializer < ApplicationSerializer
<% else -%>
module <%= slice_name.camelize %>
  class <%= model_name.camelize %>Serializer < ApplicationSerializer
<% end -%>
    # Define which attributes to include in JSON output
    attributes :id, :slug<% attributes.each do |attr| %>, :<%= attr[:name] %><% end %>, :created_at, :updated_at

    # Include related data when needed (uncomment as required)
    # belongs_to :academy, serializer: AcademySerializer

    # Use slug as the public identifier instead of internal UUID
    def id
      object.slug
    end

    # Custom attribute methods for computed or formatted values
<% attributes.each do |attr| -%>
<% if attr[:type] == 'boolean' -%>
    def <%= attr[:name] %>
      object.<%= attr[:name] %> == true
    end
<% elsif attr[:name] == 'name' -%>
    def display_name
      object.display_name
    end
<% end -%>
<% end -%>
  end
end
